!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VuexClass=e()}(this,function(){"use strict";var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},e=function(t){return"function"==typeof t},n=function(t){for(var e=[],n=t;n!==s.prototype;)n=Object.getPrototypeOf(n),e.push(n);return e},o=function(t){throw new Error("[vuex-class] "+t)},s=function s(){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=function(e){for(var n={},o=e.length;o--;){var s=e[o];t(n,Object.getOwnPropertyDescriptors(s))}return n}(n(this));this.state={},this.getters={},this.mutations={},this.actions={};var u,c,a,l=null;Object.defineProperty(this,"context",{get:function(){return l||o("Please call the 'new Vuex.store({ plusins: [ VuexClass.init() ] })' method"),l},set:function(t){l=t}}),Object.keys(i).forEach(function(t){var n=i[t],o={};"constructor"!==t&&void 0!==n&&(e(n.get)&&(o.get=function(){return r.context.getters[t]},r.getters[t]=function(){return n.get.call(r)}),e(n.set)?(o.set=function(e){return r.context.commit(t,e)},r.mutations[t]=function(t,e){return n.set.call(r,e)},e(n.get)||(o.get=function(){return function(e){return r.context.commit(t,e)}})):e(n.value)&&/^\$/.test(t)&&(r.mutations[t]=function(t,e){return n.value.call(r,e)},o.value=function(e){return r.context.commit(t,e)}),e(n.value)&&!/^\$/.test(t)&&(o.value=function(e){return r.context.dispatch(t,e)},r.actions[t]=function(t,e){return n.value.call(r,e)}),Object.defineProperty(r,t,o))}),t(this.actions,(a={root:!0,handler:function(t){var e=!!l;r.context=t,e||Object.defineProperty(r,"state",{get:function(){return r.context.state},set:function(){o("You should not update the module state directly")}})}},(c="_[vuex-class]_bind_class")in(u={})?Object.defineProperty(u,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):u[c]=a,u))};return s.init=function(){return function(t){s.bindClass(t),t.subscribe(function(e){s.bindClass(t)})}},s.bindClass=function(t){t.dispatch("_[vuex-class]_bind_class")},s.mapVuexClasses=function(t,e){var n={};return Object.keys(e).forEach(function(r){for(var i=e[r].split("/"),u=0,c=t;u<i.length;){var a=i[u];a&&(c.modules&&a in c.modules&&c.modules[a]instanceof s?c=c.modules[a]:o("'"+e[r]+"' module is not exist")),u++}n[r]=c}),n},s.install=function(e){var n=function(t){var e=t.$options.vuexClass;return!!e||e instanceof s};Object.defineProperty(e.prototype,"$vuexClass",{get:function(){return this.$root._vuexClass}}),e.mixin({beforeCreate:function(){var e=this.$options,o=e.vuexClass,r=e.mapVuexClasses;n(this)&&(this._vuexClass=o),r&&t(this,s.mapVuexClasses(this.$vuexClass,r))},destroyed:function(){n(this)&&delete this._vuexClass}})},s});
