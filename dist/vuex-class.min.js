!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VuexClass=e()}(this,function(){"use strict";var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},e=function(t){return"function"==typeof t},n=function(t){for(var e=[],n=t;n!==o.prototype;)n=Object.getPrototypeOf(n),e.push(n);return e},s=function(t){throw new Error("[vuex-class] "+t)},o=function o(){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var i=function(e){for(var n={},s=e.length;s--;){var o=e[s];t(n,Object.getOwnPropertyDescriptors(o))}return n}(n(this));this.state={},this.getters={},this.mutations={},this.actions={};var u,c,a,f=null;Object.defineProperty(this,"context",{get:function(){return f||s("Please call the 'new Vuex.store({ plusins: [ VuexClass.init() ] })' method"),f},set:function(t){f=t}}),Object.keys(i).forEach(function(t){if("constructor"!==t){var n=i[t],s={};e(n.get)&&(s.get=function(){return r.context.getters[t]},r.getters[t]=function(){return n.get.call(r)}),e(n.set)&&(s.set=function(e){return r.context.commit(t,e)},r.mutations[t]=function(t,e){return n.set.call(r,e)},e(n.get)||(s.get=function(){return function(e){return r.context.commit(t,e)}})),e(n.value)&&(s.value=function(e){return r.context.dispatch(t,e)},r.actions[t]=function(t,e){return n.value.call(r,e)}),Object.defineProperty(r,t,s)}}),t(this.actions,(a={root:!0,handler:function(t){var e=!!f;r.context=t,e||Object.defineProperty(r,"state",{get:function(){return r.context.state},set:function(){s("You should not update the module state directly")}})}},(c="_[vuex-class]_bind_class")in(u={})?Object.defineProperty(u,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):u[c]=a,u))};return o.init=function(){return function(t){o.bindClass(t),t.subscribe(function(e){o.bindClass(t)})}},o.bindClass=function(t){t.dispatch("_[vuex-class]_bind_class")},o.mapVuexClasses=function(t,e){var n={};return Object.keys(e).forEach(function(r){for(var i=e[r].split("/"),u=0,c=t;u<i.length;){var a=i[u];a&&(c.modules&&a in c.modules&&c.modules[a]instanceof o?c=c.modules[a]:s("'"+e[r]+"' module is not exist")),u++}n[r]=c}),n},o.install=function(e){var n=function(t){var e=t.$options.vuexClass;return!!e||e instanceof o};Object.defineProperty(e.prototype,"$vuexClass",{get:function(){return this.$root._vuexClass}}),e.mixin({beforeCreate:function(){var e=this.$options,s=e.vuexClass,r=e.mapVuexClasses;n(this)&&(this._vuexClass=s,r&&t(this,o.mapVuexClasses(this._vuexClass,r)))},destroyed:function(){n(this)&&delete this._vuexClass}})},o});
